<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Hello, WebVR! • A-Frame</title>
  <meta name="description" content="Hello, WebVR! • A-Frame">
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
  <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js"></script>
  <script src="/build.js"></script>
  <script>window.NAF || document.write('<script src="https://unpkg.com/networked-aframe/dist/networked-aframe.min.js">\x3C/script>')</script>

  <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
  <script
    src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>
  <script src="/js/spawn-in-circle.component.js"></script>
</head>

<body>
  <a-scene background="color: #ECECEC" networked-scene="
      room: dev;
      debug: true;
      adapter: socketio;
    ">
    <a-assets>

      <img id="grid" src="https://img.gs/bbdkhfbzkk/stretch/https://i.imgur.com/25P1geh.png" crossorigin="anonymous">
      <img id="sky" src="https://i.imgur.com/WqlqEkq.jpg" crossorigin="anonymous" />

      <!-- Templates -->

      <!-- Avatar -->
      <template id="avatar-template">
        <a-entity class="avatar">
          <a-sphere class="head" color="#ffffff" scale="0.45 0.5 0.4"></a-sphere>
          <a-entity class="face" position="0 0.05 0">
            <a-sphere class="eye" color="#efefef" position="0.16 0.1 -0.35" scale="0.12 0.12 0.12">
              <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
            </a-sphere>
            <a-sphere class="eye" color="#efefef" position="-0.16 0.1 -0.35" scale="0.12 0.12 0.12">
              <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
            </a-sphere>
          </a-entity>
        </a-entity>
      </template>

      <!-- /Templates -->
    </a-assets>

    <a-entity hand-controls="left"></a-entity>
    <a-entity hand-controls="right"></a-entity>

    <!-- Can also be controlled used with cursor -->
    <a-camera mouse-cursor wasd-controls>
      <a-cursor></a-cursor>
    </a-camera>

    <a-entity environment="preset: forest; fog: 0; shadow: true; dressingAmount: 1000"></a-entity>

    <a-cylinder position="3 1.5 3" radius="0.1" height="3" color="#FFC65D" shadow></a-cylinder>
    <a-cylinder position="-3 1.5 3" radius="0.1" height="3" color="#FFC65D" shadow></a-cylinder>
    <a-cylinder position="3 1.5 -3" radius="0.1" height="3" color="#FFC65D" shadow></a-cylinder>
    <a-cylinder position="-3 1.5 -3" radius="0.1" height="3" color="#FFC65D" shadow></a-cylinder>
    <a-cone position="0 4 0" height="2" radius-bottom="5" radius-top="0"></a-cone>
    <a-curvedimage id="tweet" look-at="#camera" position="5 2 -5" height="1.0" radius="2.7" theta-length="72"
      rotation="0 100 0" scale="0.8 0.8 0.8" src="img/count.png"></a-curvedimage>
    <a-box id="main-street" position="-5 2 -5"></a-box>
    <a-cylinder position="0 0.25 0" radius="2" height="0.5" depth="1" color="#694136" shadow></a-cylinder>
    <a-cylinder position="0 0.1 0" radius="15" height="0.2" material="src:img/road-brick-1.jpg; repeat: 20 20"></a-cylinder>
    <a-entity id="mybutton" ui-button position="0 2 -6" rotation="0 0 0"></a-entity>
  </a-scene>
  <script>
    document.querySelector('#mybutton').addEventListener('presseda', function () {
      window.location.href = "./room.html"
    });
    document.querySelector('#main-street').addEventListener('click', function () {
      window.location.href = "../main_street.html"
    });
  </script>
  <script>
    // Define custom schema for syncing avatar color, set by random-color
    NAF.schemas.add({
      template: '#avatar-template',
      components: [
        'position',
        'rotation',
        {
          selector: '.head',
          component: 'material',
          property: 'color'
        }
      ]
    });

    // Called by Networked-Aframe when connected to server
    function onConnect() {
      console.log("onConnect", new Date());
    }

    // On mobile remove elements that are resource heavy
    var isMobile = AFRAME.utils.device.isMobile();

    if (isMobile) {
      var particles = document.getElementById('particles');
      particles.parentNode.removeChild(particles);
    }
  </script>
</body>

</html>